# Media — бизнес-логика

Статус: as-is

## Ответственности
- Хранение и выдача файлов доменов (proofs, логотипы, медиа)
- Контроль доступа (владение/роль), срок жизни ссылок

## Потоки
1. Загрузка
   - Генерация `presigned URL` для PUT, валидация типа/размера
   - Сохранение метаданных (owner_type/owner_id, content_type, size)
2. Доступ
   - Проверка прав доступа → генерация `presigned URL` (TTL 15 минут)
3. Удаление/Retention
   - Плановый GC/Retention (например, proofs — 90 дней)

## Политики и безопасность
- Ограничения по размеру и MIME
- Генерация ключей `file_key` по префиксам доменов
- Антивирус/сканирование по возможности

## Чек‑лист
- [ ] TTL ссылок и валидация прав
- [ ] Политика retention покрывает все типы файлов
- [ ] Маскирование прямых ссылок на бакет
