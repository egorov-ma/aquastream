## Финализация фронтенда: унификация, качество, контроль

### Цель

- Довести фронтенд до полностью унифицированного состояния на базе Tailwind v4 + shadcn/ui и best‑practice Next.js.
- Устранить остаточные несоответствия, повысить доступность/перформанс, убрать предупреждения линтера, дополнить тесты.

Ссылка (референс)
- Tailwind v4 (референс по интеграции): [Using Vite](https://tailwindcss.com/docs/installation/using-vite)
- shadcn - https://ui.shadcn.com/docs/installation/next 

### Область работ

- Весь модуль `frontend/`, включая `app/(routes)`, `components/*`, `components/ui/*`, глобальные стили `app/globals.css`.

### Задачи и шаги

1) Аудит и чистка кода
- Устранить предупреждения ESLint (неиспользуемые импорты/переменные):
  - `components/organizers/OrganizerCard.tsx`: удалить неиспользуемые `Avatar`, `AvatarFallback`.
  - API‑роуты: убрать неиспользуемые `e`, `_` или задокументировать намеренно.
- Гарантировать отсутствие сырых внутренних ссылок `<a>` и ручных `<button>` с кастомными классами:
  - Внутри переходов — только `Link` (Next.js).
  - Интерактив — только `Button`/`buttonVariants` или `asChild`.

2) Компонентная унификация (shadcn/ui)
- Контейнеры с `rounded-md border p-*` оценить и при необходимости заменить на `Card`/`Alert`:
  - `components/org/TeamList.tsx`: элементы списка → `Card`‑ряды или оставить как есть, если это «строки» списка (принять единый подход).
  - Остальные статусные/информационные блоки — `Alert`.
- Убедиться, что все «ссылки‑кнопки» реализованы через `Button asChild`.

3) Таблицы и сортировка
- Для сортируемых колонок везде использовать кликабельный контрол (`Button variant="link" size="sm" className="p-0 h-auto"`).
- Проставлять `aria-sort` на активном столбце (состояния: `ascending`/`descending`/`none`).
- Для таблиц на TanStack Table обновить header‑рендеры по образцу `OrgEventsTable`.

4) Формы и элементы ввода
- Использовать `Input`, `Textarea`, `Label`, `Button` и унифицированные сообщения об ошибках.
- Проверить связки `label` ↔ `input` (`htmlFor`/`id`), `aria-invalid`, `aria-describedby`.
- В сложных формах — унифицировать блоки через `Card`/`Form` (если планируется).

5) Лайауты и разметка страниц
- Страницы: контейнер/отступы, `PageHeader` при необходимости, секции через `Card`/`Section`.
- Проверить единые отступы и `max-w-*` в под‑лайаутах `app/(routes)/org/**`.

6) Навигация и ссылки
- Внутренние переходы — только `Link` (Next.js). Внешние — `a` с `rel`/`target` по правилам безопасности.

7) Анимации
- Плагин `tailwindcss-animate` уже подключён. Сверить используемые классы в `Dialog/Sheet/Tooltip/Popover` (совместимость ок, но проверить визуально).

8) Suspense и hooks навигации
- Компоненты, использующие `useSearchParams()` (например, `HomeCatalog`, `EventFilters`) должны рендериться внутри родительского `Suspense`.
- Аудит страниц, включающих такие компоненты (домашняя страница уже обёрнута).

9) Производительность
- Точка контроля: первый чанк, lazy для тяжёлых блоков (EditorJS уже грузится динамически).
- По возможности — `prefetch` для часто посещаемых маршрутов.
- Проверка Lighthouse (локально `pnpm lh`): LCP < 2.5s, TBT < 200ms, CLS < 0.1, Performance ≥ 90.

10) Тестирование
- E2E (Playwright):
  - Логин/регистрация,
  - Фильтры событий (ввод, сброс),
  - Сортировка таблиц (проверка `aria-sort` + визуальное изменение),
  - Запись/оплата (виджет, QR‑пруф),
  - Модерация оплат (открытие диалога, действия).

11) Документация
- Краткий гайд для разработчиков: Tailwind‑утилиты, токены/переменные, `Button asChild`, паттерн сортировки таблиц, `Alert/Card` для статусов/блоков.

### Конкретные правки (оставшиеся точки)

- `components/organizers/OrganizerCard.tsx`: удалить неиспользуемые импорты.
- API‑роуты `app/api/auth/*`: удалить/переименовать неиспользуемые параметры (`e`, `_`).
- `components/org/TeamList.tsx`: привести элементы к единому виду (Card‑ряды или согласованный список с border‑строками).
- Таблицы на TanStack Table: унифицировать заголовки (кнопки `variant="link"`) и `aria-sort` при наличии сортировки.

### Критерии приёмки (DoD)

- Нет предупреждений ESLint и ошибок типизации.
- Нет сырых `<a>` для внутренних переходов; нет ручных `<button>` без `Button`.
- Контейнеры и статусы приведены к `Card`/`Alert` (или согласовано оставлены как «строки списка»).
- Таблицы: сортировка доступна (`aria-sort`), заголовки кликабельные.
- Страницы: единый шаблон (контейнер/отступы), `PageHeader` при необходимости.
- Анимации: через `tailwindcss-animate`, визуальные состояния в диалогах/меню корректны.
- Suspense обёртки есть для страниц с `useSearchParams()`.
- Lighthouse цели выполнены; e2e — зелёные по ключевым флоу.

### План выполнения (итерации)

1. Чистка ESLint и ссылка/кнопка‑аудит
2. Контейнеры (Card/Alert) — довести оставшиеся места
3. Таблицы — `aria-sort` и заголовки
4. Тесты e2e и Lighthouse

### Открытые вопросы

- Нужен ли Storybook/витрина для UI‑кита (ускорение разработки и визуальный контроль)?
- Требуются ли дополнительные вариации у `Button`/`Input` (например, `xs`, префиксы/суффиксы)?


