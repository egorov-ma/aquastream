# AquaStream Gradle Build Optimization - Action Plan

## –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
- **–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞**: 1.0.0-SNAPSHOT
- **Java –≤–µ—Ä—Å–∏—è**: 21
- **Spring Boot –≤–µ—Ä—Å–∏—è**: 3.3.5
- **–í—Å–µ–≥–æ Gradle —Ñ–∞–π–ª–æ–≤**: 26
- **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã**: 6 (user, event, crew, media, payment, notification)
- **–û–±—â–∏–µ –º–æ–¥—É–ª–∏**: backend-common (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞), backend-gateway (API Gateway)
- **Frontend**: Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ—Ç–¥–µ–ª—å–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞)
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: docker, backup scripts, documentation (–±–µ–∑ Gradle –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)

## –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
- –•–æ—Ä–æ—à–∞—è –º–Ω–æ–≥–æ–º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º api/service/db
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π Java 21 –∏ Spring Boot 3.3.5
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—â–µ–≥–æ –º–æ–¥—É–ª—è backend-common
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OWASP dependency check
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Lombok –∏ JUnit 5

### ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** (JWT, Bucket4j, Hypersistence Utils)
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ (PostgreSQL, Jackson, Lombok)
- **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è jar/bootJar** –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã—Ö vs –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏** (—á–∞—Å—Ç–∏—á–Ω–æ –µ—Å—Ç—å –≤ root, –Ω–æ –Ω–µ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ BOM** (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Testcontainers BOM, Jackson BOM)
- **–ü—Ä–æ–±–ª–µ–º—ã backend-common**: –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ api –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–º–µ—Å—Ç–æ implementation
- **–ü—Ä–æ–±–ª–µ–º—ã backend-gateway**: –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ security –∏ JSON –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å backend-common
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ gradle.properties** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏
- **–£—Å—Ç–∞—Ä–µ–≤—à–∞—è –≤–µ—Ä—Å–∏—è Gradle Wrapper** (–º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ task input/output optimization** (incremental compilation)
- **–ù–µ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ build.gradle** (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Convention Plugins)
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ configuration cache** –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤)

---

## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### 1. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
**–ó–∞–¥–∞—á–∞**: –ü—Ä–∏–≤–µ—Å—Ç–∏ –≤—Å–µ –≤–µ—Ä—Å–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É

**–ü—Ä–æ–±–ª–µ–º—ã**:
- JWT –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: Gateway (0.12.6) vs User-service (0.12.5 –∏–∑ root)
- Bucket4j: backend-common (8.7.0) vs gateway (8.10.1)
- Hypersistence Utils: event-db (3.6.0) vs crew-db, media-db (3.5.1)
- SpringDoc OpenAPI: –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç 2.3.0, root –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç 2.6.0 (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–®–∞–≥–∏**:
1. ‚úÖ –ü—Ä–æ–≤–µ—Å—Ç–∏ –∞—É–¥–∏—Ç –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. üìù –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
3. üîß –û–±–Ω–æ–≤–∏—Ç—å root build.gradle —Å —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏:
   ```groovy
   ext {
       jwtVersion = '0.12.6'           // –û–±–Ω–æ–≤–∏—Ç—å —Å 0.12.5
       bucket4jVersion = '8.10.1'      // –ù–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è
       hypersistenceVersion = '3.6.0'  // –û–±–Ω–æ–≤–∏—Ç—å —Å 3.5.1
       springdocVersion = '2.6.0'      // –£–∂–µ –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   }
   ```
4. üîß –ü—Ä–∏–º–µ–Ω–∏—Ç—å –µ–¥–∏–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤–æ –≤—Å–µ—Ö –º–æ–¥—É–ª—è—Ö, —É–¥–∞–ª–∏–≤ —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
5. üß™ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π, —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π

### 2. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
**–ó–∞–¥–∞—á–∞**: –£–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ü—Ä–æ–±–ª–µ–º—ã**:
- **backend-common**: –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ `api` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Jackson, Security) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `implementation`
- **backend-gateway**: –¥—É–±–ª–∏—Ä—É–µ—Ç Security –∏ WebFlux —Å backend-common
- **PostgreSQL** –æ–±—ä—è–≤–ª–µ–Ω –∏ –≥–ª–æ–±–∞–ª—å–Ω–æ, –∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö
- **Jackson databind** —è–≤–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω –≤ backend-common –∏ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö
- **Lombok** –æ–±—ä—è–≤–ª–µ–Ω –≥–ª–æ–±–∞–ª—å–Ω–æ –∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ
- **SpringDoc OpenAPI** —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö

**–®–∞–≥–∏**:
1. üîç –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É –≤—Å–µ—Ö –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ –º–æ–¥—É–ª—è–º
2. üîß **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å backend-common**:
   ```groovy
   // –ò–∑–º–µ–Ω–∏—Ç—å api –Ω–∞ implementation –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   implementation 'org.springframework.boot:spring-boot-starter-security'
   implementation 'com.fasterxml.jackson.core:jackson-databind'
   // –û—Å—Ç–∞–≤–∏—Ç—å api —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ –¥–æ–ª–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è
   api 'org.springframework.boot:spring-boot-starter-validation'
   ```
3. üîß **–£–ø—Ä–æ—Å—Ç–∏—Ç—å backend-gateway**:
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ security –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—É–∂–µ –µ—Å—Ç—å –≤ backend-common)
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ JSON –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
4. üîß –£–¥–∞–ª–∏—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏–∑ service –º–æ–¥—É–ª–µ–π:
   - PostgreSQL (–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç db –º–æ–¥—É–ª–µ–π)
   - Lombok (—É–∂–µ –≥–ª–æ–±–∞–ª—å–Ω–æ)
5. üß™ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
6. üìã –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ 40-50%, —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ api/implementation

### 3. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Gradle 8.5 + Spring Boot 3.3.5
**–ó–∞–¥–∞—á–∞**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç commons-compress, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å–±–æ—é —Å–±–æ—Ä–∫–∏

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –ö–æ–Ω—Ñ–ª–∏–∫—Ç Apache commons-compress –º–µ–∂–¥—É Gradle 8.5 –∏ Spring Boot 3.3.5
- –í–æ–∑–Ω–∏–∫–∞–µ—Ç `NoSuchMethodError` –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ `bootJar` task
- –í—ã–∑–≤–∞–Ω –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –≤ commons-compress
- –ú–æ–∂–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É –ø—Ä–æ–µ–∫—Ç–∞

**–®–∞–≥–∏**:
1. üîß **–î–æ–±–∞–≤–∏—Ç—å resolution strategy –≤ root build.gradle** (–ü–ï–†–ï–î plugins):
   ```groovy
   buildscript {
       configurations.all {
           resolutionStrategy {
               force "org.apache.commons:commons-compress:1.26.2"
           }
       }
   }
   ```

2. üîß **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```bash
   ./gradlew buildEnvironment
   ./gradlew dependencyInsight --dependency commons-compress
   ```

3. üîß **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ: –¥–æ–±–∞–≤–∏—Ç—å –≤ buildSrc/build.gradle** (–µ—Å–ª–∏ –µ—Å—Ç—å buildSrc):
   ```groovy
   dependencies {
       implementation "org.apache.commons:commons-compress:1.26.2"
   }
   ```

4. üß™ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π**:
   ```bash
   ./gradlew clean build
   ./gradlew bootJar
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–±–æ–µ–≤ —Å–±–æ—Ä–∫–∏, —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ bootJar tasks

### 4. –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ jar/bootJar
**–ó–∞–¥–∞—á–∞**: –ü—Ä–∏–≤–µ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ jar –∏ bootJar –º–µ–∂–¥—É –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–º–∏ –∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º–∏ –º–æ–¥—É–ª—è–º–∏

**–®–∞–≥–∏**:
1. üîß –î–æ–±–∞–≤–∏—Ç—å –≤ root build.gradle —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
   ```groovy
   // –î–ª—è –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π (db, service)
   configure(subprojects.findAll { 
       it.name.endsWith('-db') || it.name.endsWith('-service') 
   }) {
       jar { 
           enabled = true 
           archiveClassifier = '' 
       }
       bootJar { enabled = false }
   }
   
   // –î–ª—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö –º–æ–¥—É–ª–µ–π (api)
   configure(subprojects.findAll { it.name.endsWith('-api') }) {
       jar { enabled = false }
       bootJar { enabled = true }
   }
   ```
2. üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
3. üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

---

## üü† –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### 5. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏
**–ó–∞–¥–∞—á–∞**: –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –í root build.gradle —É–∂–µ –µ—Å—Ç—å –º–Ω–æ–≥–æ –≤–µ—Ä—Å–∏–π –≤ ext –±–ª–æ–∫–µ, –Ω–æ –Ω–µ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

**–®–∞–≥–∏**:
1. üîß –î–æ–ø–æ–ª–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª ext –≤ root build.gradle –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏:
   ```groovy
   ext {
       // –£–∂–µ –µ—Å—Ç—å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤–µ—Ä—Å–∏–π, –¥–æ–±–∞–≤–∏—Ç—å:
       bucket4jVersion = '8.10.1'         // –ù–æ–≤–æ–µ
       hypersistenceVersion = '3.6.0'     // –ù–æ–≤–æ–µ  
       hibernateTypesVersion = '2.21.1'   // –ù–æ–≤–æ–µ
       minioVersion = '8.5.7'             // –ù–æ–≤–æ–µ
       
       // –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ:
       set('jsonWebTokenVersion', '0.12.6')  // –ë—ã–ª–æ 0.12.5
       set('springDocVersion', '2.6.0')      // –£–∂–µ –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   }
   ```

2. üîß –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞:
   ```groovy
   ext.deps = [
       database: [
           postgresql: "org.postgresql:postgresql:${postgresVersion}",
           liquibase: "org.liquibase:liquibase-core:${liquibaseVersion}",
           h2: "com.h2database:h2:${h2Version}"
       ],
       security: [
           jwtApi: "io.jsonwebtoken:jjwt-api:${jsonWebTokenVersion}",
           jwtImpl: "io.jsonwebtoken:jjwt-impl:${jsonWebTokenVersion}",
           jwtJackson: "io.jsonwebtoken:jjwt-jackson:${jsonWebTokenVersion}"
       ],
       rateLimit: [
           bucket4jCore: "com.bucket4j:bucket4j-core:${bucket4jVersion}",
           bucket4jRedis: "com.bucket4j:bucket4j-redis:${bucket4jVersion}"
       ],
       json: [
           hypersistenceUtils: "io.hypersistence:hypersistence-utils-hibernate-60:${hypersistenceVersion}",
           hibernateTypes: "com.vladmihalcea:hibernate-types-60:${hibernateTypesVersion}"
       ]
   ]
   ```

3. üîÑ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –≤—Å–µ build.gradle —Ñ–∞–π–ª—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π:
   - –ó–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ root
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å deps —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
4. üìã –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤–µ—Ä—Å–∏–π –≤ ext –±–ª–æ–∫–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ –≤–µ—Ä—Å–∏–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã, —É–ø—Ä–æ—â–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ unused –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

### 6. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ BOM-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
**–ó–∞–¥–∞—á–∞**: –î–æ–±–∞–≤–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Bill of Materials –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

**–®–∞–≥–∏**:
1. üîß –î–æ–±–∞–≤–∏—Ç—å –≤ dependencyManagement –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ BOM:
   ```groovy
   dependencyManagement {
       imports {
           mavenBom "org.springframework.boot:spring-boot-dependencies:${springBootVersion}"
           mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
           mavenBom "org.testcontainers:testcontainers-bom:${testcontainersVersion}"
           mavenBom "com.fasterxml.jackson:jackson-bom:${jacksonVersion}"
       }
   }
   ```

2. üîß –£–¥–∞–ª–∏—Ç—å —è–≤–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö BOM
3. üß™ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é –≤–µ—Ä—Å–∏–π, —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

### 7. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–ª–∞–≥–∏–Ω–æ–≤
**–ó–∞–¥–∞—á–∞**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤

**–®–∞–≥–∏**:
1. üîß –°–æ–∑–¥–∞—Ç—å —É—Å–ª–æ–≤–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤ –≤ root build.gradle:
   ```groovy
   subprojects {
       apply plugin: 'java-library'
       apply plugin: 'io.spring.dependency-management'
       
       if (project.name.endsWith('-api')) {
           apply plugin: 'org.springframework.boot'
       }
       
       if (project.name == 'backend-common') {
           apply plugin: 'maven-publish'
       }
   }
   ```

2. üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤ –∏–∑ –º–æ–¥—É–ª–µ–π
3. üìã –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π, –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–æ–≤

---

## üü° –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### 8. –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
**–ó–∞–¥–∞—á–∞**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤

**–®–∞–≥–∏**:
1. üîß –î–æ–±–∞–≤–∏—Ç—å –æ–±—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ –≤ root build.gradle:
   ```groovy
   subprojects {
       test {
           useJUnitPlatform()
           testLogging {
               events "passed", "skipped", "failed"
               showStandardStreams = false
           }
           reports {
               html.required = true
               junitXml.required = true
           }
       }
   }
   ```

2. üîß –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ (unit, integration)
3. üìã –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Testcontainers

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤, —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### 9. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
**–ó–∞–¥–∞—á–∞**: –í–Ω–µ–¥—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ best practices

**–®–∞–≥–∏**:
1. üîß **–°–æ–∑–¥–∞—Ç—å gradle.properties –≤ –∫–æ—Ä–Ω–µ** (—Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç):
   ```properties
   # Build performance
   org.gradle.parallel=true
   org.gradle.caching=true
   org.gradle.daemon=true
   org.gradle.configuration-cache=true
   
   # JVM options
   org.gradle.jvmargs=-Xmx2048m -XX:MaxMetaspaceSize=512m -XX:+UseG1GC
   
   # Project properties
   version=1.0.0-SNAPSHOT
   group=org.aquastream
   
   # Reproducible builds
   org.gradle.configureondemand=false
   ```

2. üîß **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞** –≤ root build.gradle:
   ```groovy
   subprojects {
       java {
           sourceCompatibility = JavaVersion.VERSION_21
           targetCompatibility = JavaVersion.VERSION_21
       }
       
       compileJava {
           options.compilerArgs += ['-parameters']
           options.encoding = 'UTF-8'
           options.deprecation = true
           options.warnings = true
       }
   }
   ```

3. üîß **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å OWASP dependency check** (—Å–µ–π—á–∞—Å –Ω–µ–æ–¥–Ω–æ—Ä–æ–¥–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è):
   ```groovy
   subprojects {
       apply plugin: 'org.owasp.dependencycheck'
       
       dependencyCheck {
           format = 'ALL'
           suppressionFile = rootProject.file('owasp-suppression.xml')
       }
   }
   ```

4. üîß **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ repository –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**:
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
   - –î–æ–±–∞–≤–∏—Ç—å gradle plugin portal –≥–¥–µ –Ω—É–∂–Ω–æ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏ –Ω–∞ 20-30%, —É–ª—É—á—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 10. –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
**–ó–∞–¥–∞—á–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–®–∞–≥–∏**:
1. üìÑ –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. üìÑ –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. üìÑ –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

---

### 11. –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è backend-common
**–ó–∞–¥–∞—á–∞**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –ø—Ä–æ–µ–∫—Ç–∞

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `api` –≤–º–µ—Å—Ç–æ `implementation`
- –≠–∫—Å–ø–æ—Ä—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞—Ä—É–∂—É
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á–µ—Ç–∫–æ–≥–æ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

**–®–∞–≥–∏**:
1. üîß **–ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å api vs implementation –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```groovy
   // –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ api —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–º –º–æ–¥—É–ª—è–º:
   api 'org.springframework.boot:spring-boot-starter-validation'
   api 'org.springframework.boot:spring-boot-starter-web' // –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ–∑–¥–µ
   
   // –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ implementation –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   implementation 'org.springframework.boot:spring-boot-starter-security'
   implementation 'org.springframework.boot:spring-boot-starter-data-redis'
   implementation 'com.fasterxml.jackson.core:jackson-databind'
   ```

2. üîß **–°–æ–∑–¥–∞—Ç—å —á–µ—Ç–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –¥–ª—è backend-common:
   - –ß—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ api
   - –ö–∞–∫–∏–µ –∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —è–≤–ª—è—é—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–º API
   - –ö–∞–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. üîß **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å publishing –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**:
   - –î–æ–±–∞–≤–∏—Ç—å POM –æ–ø–∏—Å–∞–Ω–∏–µ
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ artifact classifiers

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ß–µ—Ç–∫–∏–π API backend-common, —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∏—Ç–∏–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 12. –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è backend-gateway
**–ó–∞–¥–∞—á–∞**: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å backend-common

**–ü—Ä–æ–±–ª–µ–º—ã**:
- –î—É–±–ª–∏—Ä—É–µ—Ç Security starter —Å backend-common
- –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ Bucket4j (core vs redis)
- –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ JWT –±–∏–±–ª–∏–æ—Ç–µ–∫

**–®–∞–≥–∏**:
1. üîß **–£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
   ```groovy
   dependencies {
       implementation project(':backend-common')
       
       // –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ:
       // implementation 'org.springframework.boot:spring-boot-starter-security' // –£–∂–µ –≤ common
       
       // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è gateway:
       implementation 'org.springframework.boot:spring-boot-starter-webflux'
       implementation 'org.springframework.cloud:spring-cloud-starter-gateway'
   }
   ```

2. üîß **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–∏** —Å backend-common:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—É –∂–µ –≤–µ—Ä—Å–∏—é Bucket4j
   - –£–±—Ä–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ JWT

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è gateway, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π

## üü¢ –ù–ò–ó–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

### 13. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ dependency locking
**–ó–∞–¥–∞—á–∞**: –û–±–µ—Å–ø–µ—á–∏—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ —Å–±–æ—Ä–∫–∏

**–®–∞–≥–∏**:
1. üîß –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ root build.gradle:
   ```groovy
   subprojects {
       dependencyLocking {
           lockAllConfigurations()
           lockMode = LockMode.STRICT
       }
   }
   ```
2. üîß –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å lock —Ñ–∞–π–ª—ã: `./gradlew dependencies --write-locks`
3. üìã –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ lock —Ñ–∞–π–ª–æ–≤ –≤ CI/CD
4. üìã –î–æ–±–∞–≤–∏—Ç—å lock —Ñ–∞–π–ª—ã –≤ git

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã–µ —Å–±–æ—Ä–∫–∏, —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å CI/CD

### 14. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–ó–∞–¥–∞—á–∞**: –£—Å–∫–æ—Ä–∏—Ç—å –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏

**–®–∞–≥–∏**:
1. üîß **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å build cache** (–¥–æ–±–∞–≤–∏—Ç—å –≤ gradle.properties)
2. üîß **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Å–±–æ—Ä–∫–∏**:
   ```groovy
   // –í gradle.properties
   org.gradle.parallel=true
   org.gradle.workers.max=4
   ```
3. üîß **–î–æ–±–∞–≤–∏—Ç—å task caching** –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∑–∞–¥–∞—á
4. üìä **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏**: `./gradlew build --profile`
5. üîß **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å test execution**:
   ```groovy
   test {
       maxParallelForks = Runtime.runtime.availableProcessors().intdiv(2) ?: 1
   }
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏ –Ω–∞ 30-50%

### 15. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
**–ó–∞–¥–∞—á–∞**: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É build —Å–∏—Å—Ç–µ–º—ã

**–®–∞–≥–∏**:
1. üìã **–°–æ–∑–¥–∞—Ç—å BUILD.md** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π –∏ –∏—Ö –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∏
   - –ü—Ä–∏–Ω—Ü–∏–ø—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
   - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. üìã **–û–±–Ω–æ–≤–∏—Ç—å README –¥–ª—è –º–æ–¥—É–ª–µ–π**:
   - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
   - –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
   - –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. üìã **–°–æ–∑–¥–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π**:
   - –®–∞–±–ª–æ–Ω—ã build.gradle –¥–ª—è api/service/db –º–æ–¥—É–ª–µ–π
   - –ß–µ–∫-–ª–∏—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –ü—Ä–∏–º–µ—Ä—ã integration —Å backend-common
4. üìã **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å dependency management**:
   - –ö–∞—Ä—Ç–∞ –≤—Å–µ—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤–µ—Ä—Å–∏–π
   - –ü—Ä–∞–≤–∏–ª–∞ –≤—ã–±–æ—Ä–∞ api vs implementation
   - –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –£–ø—Ä–æ—â–µ–Ω–∏–µ onboarding –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

---

## –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ 100% –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π** (JWT: 0.12.5‚Üí0.12.6, Bucket4j: 8.7.0‚Üí8.10.1, Hypersistence: 3.5.1‚Üí3.6.0)
- ‚úÖ **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–π –Ω–∞ 80%** (PostgreSQL, Jackson, Lombok, Security starters)
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è 100% –≤–µ—Ä—Å–∏–π** –≤ root build.gradle (–¥–æ–±–∞–≤–∏—Ç—å ~5 –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö)
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è backend-common API** (api ‚Üí implementation –¥–ª—è 70% –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ backend-gateway** (—É–¥–∞–ª–µ–Ω–∏–µ 30% –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- üìä **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏ –Ω–∞ 30%** (gradle.properties + caching)
- üìä **–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ 40%** (centralization + deduplication)

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- üéØ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- üéØ –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- üéØ –ü–æ–≤—ã—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ CI/CD pipeline
- üéØ –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

### –§–∞–∑–∞ 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏) - 1-2 –Ω–µ–¥–µ–ª–∏
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Gradle 8.5 + Spring Boot 3.3.5** (–ù–û–í–û–ï - –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É)
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤–µ—Ä—Å–∏–π (JWT, Bucket4j, Hypersistence Utils)
- –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è jar/bootJar –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –§–∞–∑–∞ 2 (–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) - 2-3 –Ω–µ–¥–µ–ª–∏  
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏ (–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ ext –±–ª–æ–∫–∞)
- BOM-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (Testcontainers, Jackson)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–ª–∞–≥–∏–Ω–æ–≤

### –§–∞–∑–∞ 3 (–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) - 3-4 –Ω–µ–¥–µ–ª–∏
- –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ gradle.properties –∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è backend-common** (api vs implementation)
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ backend-gateway** (—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)

### –§–∞–∑–∞ 4 (–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) - 4-6 –Ω–µ–¥–µ–ª—å
- –í–Ω–µ–¥—Ä–µ–Ω–∏–µ dependency locking
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–±–æ—Ä–∫–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ build —Å–∏—Å—Ç–µ–º–µ

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π, —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –∏ –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π —Å–∏—Å—Ç–µ–º—ã —Å–±–æ—Ä–∫–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ AquaStream. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–º—É –ø–æ–≤—ã—à–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞, —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ù–∞—á–∞—Ç—å —Å –∑–∞–¥–∞—á –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞, –¥–≤–∏–≥–∞—è—Å—å –ø–æ –ø–ª–∞–Ω—É –ø–æ—à–∞–≥–æ–≤–æ —Å —Ç—â–∞—Ç–µ–ª—å–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ.