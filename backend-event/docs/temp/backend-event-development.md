# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ Backend-Event

> **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:** –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ `backend-event`, –≤–∫–ª—é—á–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –Ω–∞—Å—Ç—Ä–æ–π–∫—É –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏.

## üîç –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å `backend-event` –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö:
- **–ì–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** (Ports & Adapters)
- **–î–æ–º–µ–Ω–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** (DDD)
- **CQRS** (Command Query Responsibility Segregation)
- **Event Sourcing** –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–π

```mermaid
graph TD
    subgraph "Presentation Layer"
        GRPC["gRPC API<br>Controllers"]
        REST["REST Controllers<br>(internal)"]
        KAFKA_IN["Kafka<br>Consumers"]
    end
    
    subgraph "Application Layer"
        USECASES["Use Cases/<br>Services"]
        COMMANDS["Command<br>Handlers"]
        QUERIES["Query<br>Handlers"]
    end
    
    subgraph "Domain Layer"
        DOMAIN["Domain Model/<br>Entities"]
        REPOS["Repository<br>Interfaces"]
        EVENTS["Domain Events"]
    end
    
    subgraph "Infrastructure Layer"
        DB["Database<br>Repositories"]
        KAFKA_OUT["Kafka<br>Producers"]
        CLIENTS["External<br>Service Clients"]
        CACHE["Cache<br>Implementation"]
    end
    
    GRPC --> USECASES
    REST --> USECASES
    KAFKA_IN --> COMMANDS
    
    USECASES --> COMMANDS
    USECASES --> QUERIES
    USECASES --> DOMAIN
    
    COMMANDS --> DOMAIN
    QUERIES --> DOMAIN
    DOMAIN --> EVENTS
    DOMAIN --> REPOS
    
    REPOS --> DB
    EVENTS --> KAFKA_OUT
    USECASES --> CLIENTS
    QUERIES --> CACHE
    
    classDef primary fill:#f9f,stroke:#333,stroke-width:1px;
    classDef secondary fill:#bbf,stroke:#33a,stroke-width:1px;
    
    class DOMAIN,EVENTS primary;
    class USECASES,COMMANDS,QUERIES,REPOS secondary;
```

### –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –º–æ–¥—É–ª–µ–π:

1. **Core** ‚Äî —è–¥—Ä–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
   - –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
   - Use cases
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

2. **API** ‚Äî –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤–Ω–µ—à–Ω–∏—Ö API
   - gRPC —Å–µ—Ä–≤–∏—Å—ã
   - DTO –∏ –º–∞–ø–ø–∏–Ω–≥–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

3. **Infrastructure** ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
   - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ë–î
   - Kafka –ø—Ä–æ–¥—é—Å–µ—Ä—ã/–∫–æ–Ω—Å—å—é–º–µ—Ä—ã
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –í–Ω–µ—à–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã

4. **DB** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ (Liquibase)
   - SQL —Å–∫—Ä–∏–ø—Ç—ã
   - –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é

1. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã**
   - JDK 17+
   - Docker –∏ Docker-compose
   - Gradle 8.0+
   - Git

2. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ IDE –∏ –ø–ª–∞–≥–∏–Ω—ã**
   - IntelliJ IDEA Ultimate (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ)
   - –ü–ª–∞–≥–∏–Ω—ã:
     - Lombok
     - Mapstruct Support
     - Gradle
     - SonarLint
     - Protobuf
     - PlantUML integration

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
   ```bash
   git clone https://github.com/aquastream/backend-event.git
   cd backend-event
   ```

2. **–ó–∞–ø—É—Å–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Docker**
   ```bash
   docker-compose -f docker-compose.dev.yml up -d
   ```

3. **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ**
   ```bash
   ./gradlew bootRun --args='--spring.profiles.active=local'
   ```

4. **–ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ —á–µ—Ä–µ–∑ Docker**
   ```bash
   docker-compose up -d
   ```

### –î–æ—Å—Ç—É–ø –∫ –ª–æ–∫–∞–ª—å–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º

| –†–µ—Å—É—Ä—Å | URL | –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
|--------|-----|----------------|
| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ API | http://localhost:8080 | - |
| gRPC Server | localhost:9090 | - |
| Swagger UI | http://localhost:8080/swagger-ui.html | - |
| PostgreSQL | localhost:5432 | user/password |
| Adminer (DB UI) | http://localhost:8081 | - |
| Kafka UI | http://localhost:8082 | - |
| Redis Commander | http://localhost:8083 | - |

## üìù –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É

### –°—Ç–∏–ª—å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

1. **Java Code Style**
   - –°–æ–±–ª—é–¥–µ–Ω–∏–µ [Google Java Style Guide](https://google.github.io/styleguide/javaguide.html)
   - Code Formatter –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å `.editorconfig`
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: 120 —Å–∏–º–≤–æ–ª–æ–≤

2. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ**
   - –ö–ª–∞—Å—Å—ã: `PascalCase`
   - –ú–µ—Ç–æ–¥—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `camelCase`
   - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã: `UPPER_SNAKE_CASE`
   - –ü–∞–∫–µ—Ç—ã: `lower—Åase`

3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–ª–∞—Å—Å–æ–≤**
   - –ü–æ—Ä—è–¥–æ–∫: –ø–æ–ª—è, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã, –º–µ—Ç–æ–¥—ã
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –≤–∏–¥–∏–º–æ—Å—Ç–∏: public, protected, package-private, private
   - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —á–ª–µ–Ω—ã –ø–µ—Ä–µ–¥ –Ω–µ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞

```
backend-event/
‚îú‚îÄ‚îÄ gradle/                  # Gradle wrapper –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ java/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ru/aquastream/event/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ api/             # API –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ core/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ domain/      # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ service/     # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ port/        # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ—Ä—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ infrastructure/  # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ persistence/ # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
‚îÇ   ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ messaging/   # Kafka –∏ —Ç.–¥.
‚îÇ   ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ client/      # –í–Ω–µ—à–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ application.yml      # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ application-*.yml    # –ü—Ä–æ—Ñ–∏–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ proto/                   # Protobuf/gRPC —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ test/
‚îÇ       ‚îú‚îÄ‚îÄ java/...                 # Unit/Integration —Ç–µ—Å—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ resources/...            # –¢–µ—Å—Ç–æ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã
‚îú‚îÄ‚îÄ docker/                          # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ docs/                            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ build.gradle                     # –°–±–æ—Ä–∫–∞ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π

1. **–í–µ—Ç–≤–ª–µ–Ω–∏–µ (Git Flow)**
   - `main` ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ —Ä–µ–ª–∏–∑–æ–≤
   - `develop` ‚Äî –≤–µ—Ç–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - `feature/*` ‚Äî –≤–µ—Ç–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
   - `bugfix/*` ‚Äî –≤–µ—Ç–∫–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
   - `release/*` ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–µ–ª–∏–∑–∞

2. **Pull Requests**
   - –°–æ–∑–¥–∞–Ω–∏–µ PR –∏–∑ feature –≤ develop
   - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π code review –æ—Ç –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
   - –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤—Å–µ—Ö Continuous Integration –ø—Ä–æ–≤–µ—Ä–æ–∫
   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —à–∞–±–ª–æ–Ω—É PR

3. **Commit —Å–æ–æ–±—â–µ–Ω–∏—è**
   - –§–æ—Ä–º–∞—Ç: `[JIRA-123] –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π`
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ —Ç–µ–ª–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
   - –°—Å—ã–ª–∫–∏ –Ω–∞ –∑–∞–¥–∞—á–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üíº –†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
   - –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ –∑–∞–¥–∞—á–∏ –≤ Jira
   - –û–±—Å—É–∂–¥–µ–Ω–∏–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –Ω–∞ –¥–∏–∑–∞–π–Ω-—Å–µ—Å—Å–∏–∏

2. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**
   - –°–æ–∑–¥–∞–Ω–∏–µ feature –≤–µ—Ç–∫–∏ –∏–∑ develop
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–Ω–∞—á–∞–ª–∞ –¥–æ–º–µ–Ω–Ω–æ–≥–æ —Å–ª–æ—è, –∑–∞—Ç–µ–º –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–æ–≥–æ
   - –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ (TDD —Ç–∞–º, –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ)
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ö–µ–º—ã –ë–î

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞**
   - Self-review –∫–æ–¥–∞
   - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ
   - –°–æ–∑–¥–∞–Ω–∏–µ PR –∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ code review
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—á–∞–Ω–∏–π

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –°–ª–∏—è–Ω–∏–µ PR –≤ develop –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—é

1. **DDD –ø–∞—Ç–µ—Ä–Ω—ã**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Aggregate Roots –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
   - Value Objects –¥–ª—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π
   - Domain Events –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
   - Repositories –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º

2. **–†–∞–±–æ—Ç–∞ —Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏**
   - `DomainException` ‚Äî –Ω–∞—Ä—É—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
   - `ApplicationException` ‚Äî –æ—à–∏–±–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - `InfrastructureException` ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
   - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ catch –±–ª–æ–∫–∞—Ö

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Redis)
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –Ω–∞–±–æ—Ä–æ–≤ –¥–∞–Ω–Ω—ã—Ö
   - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

1. **Unit —Ç–µ—Å—Ç—ã**
   - –ü–æ–∫—Ä—ã—Ç–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ > 85%
   - –§—Ä–µ–π–º–≤–æ—Ä–∫–∏: JUnit 5, Mockito
   - –ò–∑–æ–ª—è—Ü–∏—è –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ mocks

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Testcontainers –¥–ª—è –ë–î –∏ Kafka
   - Spring Boot Test –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

3. **–ö–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (gRPC, REST)
   - Spring Cloud Contract –¥–ª—è –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π
   - Pact –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

4. **–ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã**
   - JMeter –∏–ª–∏ Gatling –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
   - –ó–∞–ø—É—Å–∫ –≤ CI/CD –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ë–µ–Ω—á–º–∞—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–¥–∞ (JMH)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤**
   - Unit: –±—ã—Å—Ç—Ä—ã–µ, –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞
   - Integration: –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —Ç—Ä–µ–±—É—é—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - E2E: —Å–∞–º—ã–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ, —Ç–æ–ª—å–∫–æ –≤ CI

2. **Test doubles**
   - Mockito –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–∫–æ–≤
   - @MockBean –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ Spring
   - WireMock –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö HTTP API
   - TestContainers –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–ë–î, Kafka)

3. **–î–∞–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–æ–≤**
   - TestFixtures –¥–ª—è –æ–±—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - –§–∞–±—Ä–∏–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
   - Liquibase –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ —Å—Ö–µ–º—ã –ë–î

## üöÄ –ß–∞—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—É—â–Ω–æ—Å—Ç–∏

1. **–î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å**
   - –°–æ–∑–¥–∞–Ω–∏–µ Entity/Aggregate –≤ `core/domain`
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Repository
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

2. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   - –°–æ–∑–¥–∞–Ω–∏–µ JPA Entity –≤ `infrastructure/persistence`
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Repository
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Liquibase

3. **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π**
   - –°–æ–∑–¥–∞–Ω–∏–µ UseCase/Service –≤ `core/service`
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ DTO –¥–ª—è API

4. **API**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ gRPC service –≤ `.proto` —Ñ–∞–π–ª
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è gRPC Service

### –†–∞–±–æ—Ç–∞ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏

1. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π**
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–±—ã—Ç–∏—è –≤ Avro Schema Registry
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Publisher –≤ `infrastructure/messaging`
   - –í—ã–∑–æ–≤ –∏–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ Use Case

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π**
   - –°–æ–∑–¥–∞–Ω–∏–µ Consumer –≤ `infrastructure/messaging`
   - –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å Use Case –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ error handling

## üìö –ì–µ–Ω–µ—Ä–∞—Ü–∏—è gRPC –∫–ª–∏–µ–Ω—Ç–æ–≤

### Java –∫–ª–∏–µ–Ω—Ç—ã

```bash
# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Gradle
./gradlew generateProto

# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
build/generated/source/proto/main/java/ru/aquastream/event/grpc/
```

### TypeScript –∫–ª–∏–µ–Ω—Ç—ã

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
npm install -g protoc-gen-ts grpc-web

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è
protoc --ts_out=./ts-client --grpc-web_out=./ts-client \
  --proto_path=./src/main/proto ./src/main/proto/*.proto

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ
npm install --save ../backend-event/ts-client
```

## ‚ùì FAQ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è

1. **–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL  
   **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ `application.yml`

2. **–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î  
   **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –º–∏–≥—Ä–∞—Ü–∏–π –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `./gradlew flywayRepair`

3. **–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∏ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ gRPC  
   **–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ proto —Ñ–∞–π–ª–æ–≤ –∏ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö import

4. **–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º  
   **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ race condition –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–∑–æ–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. **–°–±–æ—Ä–∫–∞ JAR**
   ```bash
   ./gradlew clean build
   ```

2. **–°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞**
   ```bash
   ./gradlew jibDockerBuild
   # –∏–ª–∏
   docker build -t aquastream/backend-event:latest .
   ```

3. **–ó–∞–ø—É—Å–∫ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º**
   ```bash
   java -jar backend-event.jar --spring.profiles.active=dev
   ```

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Swagger UI](http://localhost:8080/swagger-ui.html) ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è REST API
- [JavaDoc](./build/docs/javadoc/index.html) ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–¥–∞
- [Architecture Decision Records](./docs/adr/) ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã

- [Spring Boot Documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/)
- [gRPC Documentation](https://grpc.io/docs/languages/java/)
- [Kafka Documentation](https://kafka.apache.org/documentation/) 