# AquaStream Backend Event Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏—è–º–∏, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏, –∏–∑–±—Ä–∞–Ω–Ω—ã–º –∏ –ª–∏—Å—Ç–æ–º –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã AquaStream.

## –û–ø–∏—Å–∞–Ω–∏–µ

`backend-event` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏–π 
–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏, —Å–∏—Å—Ç–µ–º—É –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ, –ª–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è –¥–ª—è –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π. 
–°–µ—Ä–≤–∏—Å —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –º–æ–¥–µ–ª–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú—É–ª—å—Ç–∏–º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
backend-event/
‚îú‚îÄ‚îÄ backend-event-api/        # REST –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ DTO
‚îÇ   ‚îú‚îÄ‚îÄ controller/          # REST endpoints
‚îÇ   ‚îú‚îÄ‚îÄ dto/                # Data Transfer Objects
‚îÇ   ‚îî‚îÄ‚îÄ exception/          # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
‚îú‚îÄ‚îÄ backend-event-service/   # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ service/            # –ë–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ mapper/             # Entity ‚Üî DTO –º–∞–ø–ø–∏–Ω–≥
‚îÇ   ‚îú‚îÄ‚îÄ scheduler/          # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îî‚îÄ‚îÄ exception/          # –ë–∏–∑–Ω–µ—Å-–∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îî‚îÄ‚îÄ backend-event-db/       # –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö
    ‚îú‚îÄ‚îÄ entity/             # JPA Entity –∫–ª–∞—Å—Å—ã
    ‚îú‚îÄ‚îÄ repository/         # Spring Data JPA —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
    ‚îî‚îÄ‚îÄ migration/          # Liquibase –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

#### üé™ –°–æ–±—ã—Ç–∏—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –∫–æ–º–∞–Ω–¥—ã –∏ FAQ
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π (—á–µ—Ä–Ω–æ–≤–∏–∫–∏ ‚Üí –ø—É–±–ª–∏–∫–∞—Ü–∏—è)
- –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è: RAFTING, HIKING, BANQUET, WORKSHOP

#### üìÖ –°–∏—Å—Ç–µ–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª: PENDING ‚Üí CONFIRMED ‚Üí COMPLETED
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª

#### ‚≠ê –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°—á–µ—Ç—á–∏–∫–∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ —Å–æ–±—ã—Ç–∏–π

#### üìã –õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è (Waitlist)
- FIFO –æ—á–µ—Ä–µ–¥—å –¥–ª—è –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- 30-–º–∏–Ω—É—Ç–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏ –º–µ—Å—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Notification Service
- –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

#### EventEntity - –°–æ–±—ã—Ç–∏—è
- **id** - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **organizerSlug** - –°—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞
- **type** - –¢–∏–ø —Å–æ–±—ã—Ç–∏—è (RAFTING, HIKING, etc.)
- **title** - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
- **dateStart/dateEnd** - –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏
- **location** - –õ–æ–∫–∞—Ü–∏—è (JSON: –∞–¥—Ä–µ—Å, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –º–µ—Å—Ç–æ)
- **price** - –°—Ç–æ–∏–º–æ—Å—Ç—å (NULL –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö)
- **capacity/available** - –í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Å—Ç–∞
- **status** - –°—Ç–∞—Ç—É—Å: DRAFT, PUBLISHED, CANCELLED, COMPLETED
- **tags** - –ú–∞—Å—Å–∏–≤ —Ç–µ–≥–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

#### OrganizerEntity - –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã
- **id** - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **slug** - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π URL-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **name** - –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **logoUrl** - URL –ª–æ–≥–æ—Ç–∏–ø–∞
- **contacts** - –ö–æ–Ω—Ç–∞–∫—Ç—ã (JSON)
- **brandColor** - –§–∏—Ä–º–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç (#RRGGBB)

#### BookingEntity - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **id** - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **eventId** - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
- **userId** - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **status** - PENDING, CONFIRMED, CANCELLED, EXPIRED, COMPLETED, NO_SHOW
- **amount** - –°—Ç–æ–∏–º–æ—Å—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **paymentStatus** - NOT_REQUIRED, PENDING, SUCCEEDED, REJECTED, CANCELED
- **expiresAt** - –í—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è –¥–ª—è PENDING –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π

#### WaitlistEntity - –õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è
- **id** - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- **eventId** - –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
- **userId** - –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **priority** - FIFO –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–º–µ–Ω—å—à–µ = –≤—ã—à–µ)
- **notifiedAt** - –í—Ä–µ–º—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–æ—Å—Ç—É–ø–Ω–æ–º –º–µ—Å—Ç–µ
- **notificationExpiresAt** - –ò—Å—Ç–µ—á–µ–Ω–∏–µ 30-–º–∏–Ω—É—Ç–Ω–æ–≥–æ –æ–∫–Ω–∞

### –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –≤ —Å—Ç–∞—Ç—É—Å–µ DRAFT, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ PUBLISHED (–Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ)
- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –Ω–µ–ª—å–∑—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

#### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–¥–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ PENDING —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç
- –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ Telegram)

#### –õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è
- FIFO –æ—á–µ—Ä–µ–¥—å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- 30-–º–∏–Ω—É—Ç–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –º–µ—Å—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏

## API Endpoints

### –ü—É–±–ª–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

#### `GET /api/v1/events`
–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Å–æ–±—ã—Ç–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `search` - –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
- `type` - —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- `status` - —Å—Ç–∞—Ç—É—Å —Å–æ–±—ã—Ç–∏—è
- `minPrice/maxPrice` - —Ü–µ–Ω–æ–≤–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
- `dateFrom/dateTo` - –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
- `page/size` - –ø–∞–≥–∏–Ω–∞—Ü–∏—è

#### `GET /api/v1/events/{id}`
–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–±—ã—Ç–∏–∏

#### `GET /api/v1/organizers`
–°–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ —Å –ø–æ–∏—Å–∫–æ–º

#### `GET /api/v1/organizers/{slug}`
–ü—Ä–æ—Ñ–∏–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞ —Å –∫–æ–º–∞–Ω–¥–æ–π, FAQ –∏ —Å–æ–±—ã—Ç–∏—è–º–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏ (ORGANIZER)

#### `POST /api/v1/events`
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è

```json
{
  "type": "RAFTING",
  "title": "–°–ø–ª–∞–≤ –ø–æ —Ä–µ–∫–µ –ë–µ–ª–∞—è",
  "dateStart": "2025-08-25T09:00:00Z",
  "dateEnd": "2025-08-25T18:00:00Z",
  "location": {
    "address": "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–¥—ã–≥–µ—è, —Ä–µ–∫–∞ –ë–µ–ª–∞—è",
    "coordinates": [44.0, 40.0]
  },
  "price": 3500.00,
  "capacity": 20,
  "tags": ["rafting", "adventure", "weekend"]
}
```

#### `PUT /api/v1/events/{id}`
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è (—Ç–æ–ª—å–∫–æ DRAFT)

#### `POST /api/v1/events/{id}/publish`
–ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è (DRAFT ‚Üí PUBLISHED)

### –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

#### `POST /api/v1/bookings`
–°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```json
{
  "eventId": "550e8400-e29b-41d4-a716-446655440000"
}
```

#### `GET /api/v1/bookings`
–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

#### `PUT /api/v1/bookings/{id}/confirm`
–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π)

#### `PUT /api/v1/bookings/{id}/cancel`
–û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –ò–∑–±—Ä–∞–Ω–Ω–æ–µ

#### `POST /api/v1/events/{eventId}/favorite`
–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

#### `DELETE /api/v1/events/{eventId}/favorite`
–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

#### `GET /api/v1/profile/favorites`
–°–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### `GET /api/v1/events/{eventId}/favorite/status`
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

### –õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è

#### `POST /api/v1/events/{eventId}/waitlist`
–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –ª–∏—Å—Ç—É –æ–∂–∏–¥–∞–Ω–∏—è

#### `DELETE /api/v1/events/{eventId}/waitlist`
–ü–æ–∫–∏–Ω—É—Ç—å –ª–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è

#### `GET /api/v1/events/{eventId}/waitlist/status`
–°—Ç–∞—Ç—É—Å –≤ –ª–∏—Å—Ç–µ –æ–∂–∏–¥–∞–Ω–∏—è

#### `GET /api/v1/events/waitlist`
–í—Å–µ –ª–∏—Å—Ç—ã –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```gradle
dependencies {
    implementation project(':backend-event:backend-event-api')
    implementation project(':backend-event:backend-event-service')
    implementation project(':backend-event:backend-event-db')
}
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/aquastream
    username: aquastream_user
    password: ${DB_PASSWORD}
  
  liquibase:
    change-log: classpath:migration/liquibase/master.xml
    default-schema: event

server:
  port: 8102

aquastream:
  scheduling:
    enabled: true
  booking:
    expiration-minutes: 30
  waitlist:
    notification-window-minutes: 30
    cleanup-interval-minutes: 5
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è

```java
@Autowired
private OrganizerEventService eventService;

CreateEventDto eventDto = CreateEventDto.builder()
    .type("RAFTING")
    .title("–°–ø–ª–∞–≤ –ø–æ —Ä–µ–∫–µ –ë–µ–ª–∞—è")
    .dateStart(LocalDateTime.of(2025, 8, 25, 9, 0))
    .dateEnd(LocalDateTime.of(2025, 8, 25, 18, 0))
    .price(BigDecimal.valueOf(3500))
    .capacity(20)
    .tags(List.of("rafting", "adventure"))
    .build();

EventDto event = eventService.createEvent(organizerSlug, eventDto);
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```java
@Autowired
private BookingService bookingService;

CreateBookingRequest request = new CreateBookingRequest();
request.setEventId(eventId);

BookingDto booking = bookingService.createBooking(userId, request);
```

#### –†–∞–±–æ—Ç–∞ —Å –ª–∏—Å—Ç–æ–º –æ–∂–∏–¥–∞–Ω–∏—è

```java
@Autowired
private WaitlistService waitlistService;

// –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –ª–∏—Å—Ç—É –æ–∂–∏–¥–∞–Ω–∏—è
JoinWaitlistDto joinResult = waitlistService.joinWaitlist(eventId, userId);

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
WaitlistStatusDto status = waitlistService.getWaitlistStatus(eventId, userId);
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞: event

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- **organizers** - –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
- **events** - –°–æ–±—ã—Ç–∏—è –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
- **team_members** - –ö–æ–º–∞–Ω–¥–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞
- **faq_items** - FAQ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞
- **bookings** - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- **booking_logs** - –ê—É–¥–∏—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- **favorites** - –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- **waitlist** - –õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è
- **waitlist_audit** - –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –≤ –ª–∏—Å—Ç–µ –æ–∂–∏–¥–∞–Ω–∏—è

#### –ò–Ω–¥–µ–∫—Å—ã
- **–°–æ–±—ã—Ç–∏—è**: –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É, —Å—Ç–∞—Ç—É—Å—É, —Ç–∏–ø—É, –¥–∞—Ç–µ, —Ü–µ–Ω–µ, —Ç–µ–≥–∞–º
- **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è**: –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —Å–æ–±—ã—Ç–∏—é, —Å—Ç–∞—Ç—É—Å—É
- **–õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è**: –ø–æ —Å–æ–±—ã—Ç–∏—é, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º
- **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫**: GIN –∏–Ω–¥–µ–∫—Å –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç (dateEnd >= dateStart)
- –ö–æ–Ω—Ç—Ä–æ–ª—å –≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (available <= capacity)
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –≤ –ª–∏—Å—Ç–µ –æ–∂–∏–¥–∞–Ω–∏—è

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –° Payment Service
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ QR –ø–ª–∞—Ç–µ–∂–µ–π —Å —Ä—É—á–Ω–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π

### –° User Service
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Ç—ã –ø—Ä–æ—Ñ–∏–ª—è (—Ç–µ–ª–µ—Ñ–æ–Ω/Telegram)
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ user ID
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π (USER, ORGANIZER)

### –° Notification Service
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ª–∏—Å—Ç–∞ –æ–∂–∏–¥–∞–Ω–∏—è –æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö

## –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

### –ò—Å—Ç–µ—á–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- **–ß–∞—Å—Ç–æ—Ç–∞**: –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- **–§—É–Ω–∫—Ü–∏—è**: –ø–µ—Ä–µ–≤–æ–¥ PENDING ‚Üí EXPIRED –ø–æ—Å–ª–µ 30 –º–∏–Ω—É—Ç
- **–≠—Ñ—Ñ–µ–∫—Ç**: –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –º–µ—Å—Ç, –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ª–∏—Å—Ç–∞ –æ–∂–∏–¥–∞–Ω–∏—è

### –û—á–∏—Å—Ç–∫–∞ –ª–∏—Å—Ç–∞ –æ–∂–∏–¥–∞–Ω–∏—è
- **–ß–∞—Å—Ç–æ—Ç–∞**: –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- **–§—É–Ω–∫—Ü–∏—è**: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **–≠—Ñ—Ñ–µ–∫—Ç**: –ø–µ—Ä–µ–¥–∞—á–∞ –º–µ—Å—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–º—É –≤ –æ—á–µ—Ä–µ–¥–∏

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –∫–æ–¥—ã

- **400 Bad Request** - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞
- **401 Unauthorized** - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **403 Forbidden** - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- **404 Not Found** - –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- **409 Conflict** - –ù–∞—Ä—É—à–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
- **422 Unprocessable Entity** - –í–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

### –§–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ (RFC 7807)

```json
{
  "type": "https://api.aquastream.org/errors/booking-conflict",
  "title": "–ö–æ–Ω—Ñ–ª–∏–∫—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è",
  "status": 409,
  "detail": "–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–∂–µ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ",
  "instance": "/api/v1/bookings",
  "timestamp": "2025-08-20T10:30:00Z",
  "correlationId": "req-abc123"
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check

```bash
GET /actuator/health
```

### Metrics

```bash
GET /actuator/metrics
```

### OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

```bash
GET /swagger-ui.html
GET /v3/api-docs
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

```bash
./gradlew backend-event:backend-event-service:test
```

### Integration —Ç–µ—Å—Ç—ã

```bash
./gradlew backend-event:backend-event-api:test
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ú–æ–¥—É–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ TestContainers –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö H2.

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- Partial –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- GIN –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è JSONB –ø–æ–ª–µ–π –∏ –º–∞—Å—Å–∏–≤–æ–≤
- Batch –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Spring Cache –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Redis –¥–ª—è —Å–µ—Å—Å–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- Stateless —Å–µ—Ä–≤–∏—Å, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- Database connection pooling
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- JWT —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ Gateway
- Role-based –¥–æ—Å—Ç—É–ø (USER, ORGANIZER, ADMIN)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker

```dockerfile
FROM openjdk:21-jre-slim
COPY backend-event-api/build/libs/*.jar app.jar
EXPOSE 8102
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

### Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```bash
SPRING_PROFILES_ACTIVE=prod
DB_HOST=postgres
DB_PASSWORD=secure_password
REDIS_HOST=redis
JWT_SECRET=secret_key
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ
- Spring Boot 3.x
- Spring Data JPA
- PostgreSQL 15+
- Liquibase
- Swagger/OpenAPI 3

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
- Redis (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- Micrometer (–º–µ—Ç—Ä–∏–∫–∏)
- TestContainers (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)