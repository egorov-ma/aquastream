# Event Service

Сервис планирования сплавов, реализованный с использованием gRPC.

## Функциональность

- Создание и управление планами сплавов
- Расчёт длительности и оценка сложности маршрутов
- Предоставление gRPC API для интеграции

## Конфигурация

Конфигурация определяется в файлах:
- **Локальный запуск:** [application.yml](src/main/resources/application.yml)
- **Запуск через Docker:** [application-docker.yml](src/main/resources/application-docker.yml)

Описание API содержится в файле [planning.proto](src/main/proto/planning.proto).

## Визуализация gRPC API

Сервис поддерживает gRPC Reflection для автоматического предоставления схемы API внешним инструментам. Для визуализации gRPC API используйте утилиту grpcui:

- Если grpcui установлен локально, выполните:
  ```
  grpcui -plaintext localhost:9090
  ```
- Либо запустите через Docker:
  ```
  docker run -p 8080:8080 fullstorydev/grpcui -plaintext localhost:9090
  ```

Микросервис backend-event для проекта Aquastream: детальное описание

Архитектура микросервиса и взаимодействие с компонентами

Микросервис backend-event отвечает за управление событиями (мероприятиями) и взаимодействует с другими частями системы по принципам микросервисной архитектуры. Он реализован на Spring Boot и использует gRPC для высокопроизводительных внутренних вызовов между сервисами, а также Apache Kafka для обмена событиями в режиме реального времени. Внешние запросы от фронтенда проходят через API Gateway (backend-gateway) по REST/HTTP, который перенаправляет их на соответствующие gRPC-методы микросервиса. Keycloak (или связанный сервис backend-user) обеспечивает аутентификацию и выдачу JWT-токенов для пользователей; эти токены используются для проверки прав доступа при вызовах микросервиса. Каждый микросервис имеет свою собственную базу данных (PostgreSQL для backend-event), что обеспечивает изоляцию данных и низкую связность: данные каждого сервиса доступны только через его API. Ниже представлена общая схема взаимодействия сервисов:

![img.png](img.png)
Рисунок: Общая архитектура микросервиса backend-event и его взаимодействие с другими компонентами. Запросы от Frontend идут через REST API Gateway, который вызывает gRPC-методы backend-event. Сервис публикует доменные события в Kafka, которые получает сервис уведомлений. Аутентификация и авторизация осуществляются через Keycloak (JWT).