# T16 — Интеграция платёжного виджета (YooKassa по умолчанию)

**Контекст:** таска опирается на документ бизнес‑архитектуры `/frontend/docs/AquaStream_Business_Spec_v1.1.md`.  
Прочитать разделы: §8, §14, §20.  
Работа ведётся в монорепозитории; фронтенд‑модуль: `/frontend`. Инфраструктура — `/infra`. CI — `/.github/workflows`.

## Цель / Результат
Подключить виджет на странице Checkout; обработать success/cancel; эмулировать вебхук.

## Область работ
**Входит в объём:**
- Переключение провайдера по `PAYMENTS_PROVIDER`.
- Клиентский mount виджета.
- Заглушка вебхука обновляет статус брони.

**Не входит:**
- Боевые ключи мерчанта.

## Предусловия
- Установлены Node.js 22 LTS и pnpm.
- Доступ к репозиторию с модулями `/frontend`, `/infra`, `/.github`.
- Возможность запускать Docker локально.

## Шаги выполнения
1. Рендер провайдера по ENV.
2. Обработчики `onSuccess/onCancel`.
3. `/api/payments/webhook` (stub); в dev — эмуляция вебхука таймером.
4. Обновление статуса брони.

## Артефакты
- Успешная оплата переводит бронь в `paid`.

## Бизнес‑приёмка (пользовательская)
- Отмена возвращает к опциям без ошибок.

## Definition of Done (техническая готовность)
- В консоли нет ошибок виджета; вебхук‑заглушка детерминирована.