#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript..."
npx tsc --noEmit || exit 1

# –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞
echo "üîç –ó–∞–ø—É—Å–∫ ESLint..."
npx lint-staged || exit 1

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–π–¥–∂–µ–π –ø–æ–∫—Ä—ã—Ç–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
if [ -f "coverage/coverage-final.json" ]; then
  echo "üîç –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–π–¥–∂–µ–π –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞..."
  node scripts/generate-coverage-badge.js || exit 1
fi 