# Aquastream Frontend

Современное веб-приложение для организации и бронирования водных мероприятий.

## Быстрый старт

### Способ 1: Запуск с помощью скрипта (Рекомендуется)

```bash
# Запустить интерактивный скрипт
./run.sh
```

Скрипт предложит вам выбрать одно из действий:
1. Локальный запуск для разработки
2. Запуск через Docker
3. Установка зависимостей и настройка проекта
4. Сборка для продакшена
5. Устранение проблем с установкой зависимостей

### Способ 2: Локальный запуск (для разработчиков)

```bash
# Установка зависимостей и настройка проекта
npm run setup

# Запуск в режиме разработки
npm run dev
```

### Способ 3: Запуск с использованием Docker

```bash
# Сборка Docker-образа
npm run docker:build

# Запуск Docker-контейнера
npm run docker:run
```

После запуска приложение будет доступно по адресу:
- Локальный запуск: [http://localhost:3000](http://localhost:3000)
- Docker: [http://localhost:3000](http://localhost:3000)

## Технологии

- **React 18** - библиотека для создания пользовательских интерфейсов
- **TypeScript** - типизированный JavaScript для повышения надежности кода
- **Redux Toolkit** - управление состоянием приложения
- **Material UI** - библиотека компонентов для современного UI
- **React Router** - маршрутизация в приложении
- **Vite** - быстрый инструмент сборки
- **Axios** - HTTP-клиент для работы с API

## Скрипты

| Команда | Описание |
|---------|----------|
| `npm run setup` | Установка зависимостей и настройка проекта |
| `npm run dev` | Запуск приложения в режиме разработки |
| `npm run build` | Сборка приложения для продакшена |
| `npm run serve` | Запуск собранного приложения локально |
| `npm run lint` | Проверка кода на соответствие стандартам |
| `npm run format` | Форматирование кода |
| `npm run test` | Запуск тестов |
| `npm run test:watch` | Запуск тестов в режиме наблюдения |
| `npm run test:coverage` | Запуск тестов с отчетом о покрытии |
| `npm run type-check` | Проверка типов TypeScript |
| `npm run check` | Полная проверка проекта (типы, линтинг, тесты) |
| `npm run docker:build` | Сборка Docker-образа |
| `npm run docker:run` | Запуск Docker-контейнера |

## Структура проекта

```
frontend/
├── .husky/                # Git-хуки для автоматизации процессов
├── public/                # Статические файлы
├── src/                   # Исходный код
│   ├── assets/            # Ресурсы (изображения, шрифты и т.д.)
│   ├── components/        # Переиспользуемые компоненты
│   ├── hooks/             # Пользовательские React-хуки
│   ├── modules/           # Бизнес-модули приложения
│   ├── pages/             # Компоненты страниц
│   ├── routes/            # Маршрутизация
│   ├── services/          # Сервисы для работы с API
│   ├── shared/            # Общие ресурсы
│   │   └── config/        # Конфигурация приложения
│   ├── store/             # Управление состоянием (Redux)
│   ├── styles/            # Глобальные стили
│   ├── theme/             # Настройки темы
│   ├── types/             # TypeScript типы и интерфейсы
│   └── utils/             # Вспомогательные функции
├── .eslintrc.json         # Конфигурация ESLint
├── .prettierrc            # Конфигурация Prettier
├── index.html             # Главный HTML файл
├── package.json           # Зависимости и скрипты
├── tsconfig.json          # Конфигурация TypeScript
├── tsconfig.node.json     # Конфигурация TypeScript для Node.js
└── vite.config.ts         # Конфигурация Vite
```

## Технологический стек

- **React 18** - библиотека для создания пользовательских интерфейсов
- **TypeScript** - типизированный JavaScript
- **Redux Toolkit** - управление состоянием приложения
- **React Router** - маршрутизация
- **Material UI** - компонентная библиотека
- **Axios** - HTTP-клиент
- **Vite** - инструмент сборки
- **ESLint** - статический анализ кода
- **Prettier** - форматирование кода
- **Husky** - Git-хуки
- **Vitest** - тестирование

## Соглашения по коду

### Импорты

Используйте алиасы для импортов вместо относительных путей:

```tsx
// Хорошо
import { Button } from '@/components/ui';
import { useAuth } from '@/hooks';

// Плохо
import { Button } from '../../components/ui';
import { useAuth } from '../../../hooks';
```

### Типизация

Всегда используйте строгую типизацию:

```tsx
// Хорошо
function sum(a: number, b: number): number {
  return a + b;
}

// Плохо
function sum(a, b) {
  return a + b;
}
```

### Компоненты

Используйте функциональные компоненты и хуки:

```tsx
// Хорошо
const UserProfile: React.FC<UserProfileProps> = ({ user }) => {
  return <div>{user.name}</div>;
};

// Плохо
class UserProfile extends React.Component {
  render() {
    return <div>{this.props.user.name}</div>;
  }
}
```

## Инфраструктура

Вся работа с Docker выполняется через централизованный модуль инфраструктуры:

```
/Users/egorovma/IdeaProjects/aquastream/infra
```

Не создавайте дублирующие инфраструктурные файлы в директории frontend.

## Переменные окружения

Создайте файл `.env` в корне проекта:

```
VITE_API_URL=http://localhost:8080/api
VITE_APP_VERSION=1.0.0
```

## Решение проблем

### Ошибки при установке зависимостей

Если вы получаете ошибки при установке зависимостей, вы можете воспользоваться интерактивным скриптом устранения проблем:

```bash
# Запустить интерактивный скрипт
./run.sh

# Выбрать пункт 5 - Устранение проблем с установкой зависимостей
```

Или использовать один из следующих вариантов:

```bash
# Вариант 1: Используйте флаг --legacy-peer-deps
npm install --legacy-peer-deps

# Вариант 2: Используйте yarn вместо npm
npm install -g yarn
yarn install
```

## Особенности архитектуры

- **Модульная структура** - код организован по функциональным модулям
- **Строгая типизация** - все компоненты и функции типизированы с помощью TypeScript
- **Переиспользуемые компоненты** - UI компоненты изолированы и переиспользуемы
- **Кастомные хуки** - бизнес-логика вынесена в хуки для переиспользования
- **Redux для управления состоянием** - глобальное состояние управляется через Redux Toolkit
- **Алиасы импортов** - настроены алиасы для удобного импорта модулей (@components, @services и т.д.)
- **Единый стиль кода** - настроены ESLint и Prettier для поддержания единого стиля кода

## Последние улучшения

### Май 2024
- ✅ Добавлена интернационализация (i18n) с поддержкой русского и английского языков
- ✅ Улучшена доступность (a11y) с помощью утилит для управления фокусом и клавиатурной навигации
- ✅ Реализовано разделение кода (code splitting) для оптимизации загрузки страниц
- ✅ Добавлен компонент LazyImage для ленивой загрузки изображений
- ✅ Улучшена безопасность с помощью утилит для санитизации HTML и URL
- ✅ Добавлены утилиты для отладки производительности
- ✅ Реализован кэширующий хук useCache для оптимизации запросов к API
- ✅ Обновлены зависимости проекта

### Апрель 2024
- ✅ Исправлены все ошибки TypeScript
- ✅ Улучшена структура директорий для более логичной организации кода
- ✅ Настроены алиасы импортов для удобства разработки
- ✅ Обновлены типы для более строгой типизации
- ✅ Улучшена работа с API через типизированные сервисы
- ✅ Оптимизирована работа с Redux через типизированные слайсы
- ✅ Удалены неиспользуемые файлы и код
- ✅ Добавлены тесты для компонентов UI (Button)
- ✅ Добавлены тесты для сервисов API
- ✅ Добавлен модуль валидации форм с полным тестовым покрытием
- ✅ Исправлены проблемы с ESLint и конфигурацией TypeScript
- ✅ Обновлены зависимости для совместимости 