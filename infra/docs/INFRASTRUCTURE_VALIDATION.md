# –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞–∫ –∫–æ–¥–∞ (Infrastructure as Code Validation)

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã AquaStream –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ best practices –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### üîß –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
**–§–∞–π–ª**: `infra/scripts/validate-infrastructure.sh`

–í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É:
- Docker Compose —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Dockerfile –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å  
- Shell —Å–∫—Ä–∏–ø—Ç—ã (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞)
- YAML —Ñ–∞–π–ª—ã (—Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø–∞—Ä–æ–ª–∏
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤

### ü™ù Git Hooks
**–§–∞–π–ª**: `.githooks/pre-commit`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º:
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–º–º–∏—Ç–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏
- –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º

### üîÑ CI/CD –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
**–§–∞–π–ª—ã**: 
- `.github/workflows/deploy.yml` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ
- `.github/workflows/workflow-lint.yml` - –ª–∏–Ω—Ç–∏–Ω–≥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

```bash
# –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
./infra/scripts/validate-infrastructure.sh

# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
./infra/scripts/validate-infrastructure.sh --quick

# –¢–æ–ª—å–∫–æ Docker —Ñ–∞–π–ª—ã
./infra/scripts/validate-infrastructure.sh --docker-only

# –¢–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
./infra/scripts/validate-infrastructure.sh --security-only
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git Hooks

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ hooks –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
./infra/scripts/setup-git-hooks.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
./infra/scripts/setup-git-hooks.sh --check-only

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ hooks
./infra/scripts/setup-git-hooks.sh --uninstall
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

Git hooks –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏:
- `git commit` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- `git push` - –ø–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ CI/CD

## –¢–∏–ø—ã –ø—Ä–æ–≤–µ—Ä–æ–∫

### üê≥ Docker Compose –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- ‚úÖ Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `:latest` —Ç–µ–≥–æ–≤
- ‚úÖ –ù–∞–ª–∏—á–∏–µ health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Resource limits –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚ùå Hardcoded –ø–∞—Ä–æ–ª–∏/—Å–µ–∫—Ä–µ—Ç—ã
- ‚úÖ Security –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```bash
# –•–æ—Ä–æ—à–æ ‚úÖ
image: postgres:15-alpine

# –ü–ª–æ—Ö–æ ‚ùå  
image: postgres:latest
```

### üìÑ Dockerfile –ª–∏–Ω—Ç–∏–Ω–≥

**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –±–∞–∑–æ–≤—ã—Ö –æ–±—Ä–∞–∑–æ–≤
- ‚ö†Ô∏è Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞
- ‚ö†Ô∏è –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (--chown)
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø–∞–∫–µ—Ç–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤

**–ü—Ä–∏–º–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
```dockerfile
# –•–æ—Ä–æ—à–æ ‚úÖ
FROM eclipse-temurin:21-jre
USER appuser
COPY --chown=appuser:appuser app.jar /app/

# –ü–ª–æ—Ö–æ ‚ùå
FROM eclipse-temurin:latest
# –ó–∞–ø—É—Å–∫ –ø–æ–¥ root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
COPY app.jar /app/
```

### üîß Shell —Å–∫—Ä–∏–ø—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏—è

**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ Bash —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- ‚úÖ –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ –ø—Ä–∞–≤–∞ (chmod +x)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (set -e)
- ‚ö†Ô∏è Hardcoded –ø—É—Ç–∏
- ‚úÖ –ü–æ—Ä—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

**Best practices:**
```bash
#!/bin/bash
set -euo pipefail  # –°—Ç—Ä–æ–≥–∏–π —Ä–µ–∂–∏–º ‚úÖ

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–æ hardcoded –ø—É—Ç–µ–π ‚úÖ
PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# –ò–∑–±–µ–≥–∞–π—Ç–µ ‚ùå
# cd /usr/local/myapp  
```

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤

**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ .gitignore —Å–æ–¥–µ—Ä–∂–∏—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- ‚ùå .env —Ñ–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫—Ä–∏—Ç–∏—á–Ω—ã–º —Ñ–∞–π–ª–∞–º
- ‚ùå Hardcoded —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∞—Å–ø–µ–∫—Ç—ã:**
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚ùå –°–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏ (< 12 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚ùå –ù–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –û—Ç—á–µ—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á–µ—Ç–∞

```
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫:
  ‚Ä¢ –í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: 45
  ‚Ä¢ ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ: 38
  ‚Ä¢ ‚ùå –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: 2  
  ‚Ä¢ ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: 5

üìà –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏: 84%
```

### –§–∞–π–ª—ã –æ—Ç—á–µ—Ç–æ–≤

- `validation_report_YYYYMMDD_HHMMSS.txt` - –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –≤ GitHub Actions
- –õ–æ–≥–∏ –≤ stdout/stderr

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD

### GitHub Actions

**Workflow**: `.github/workflows/workflow-lint.yml`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ `infra/**`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Å –æ—Ç—á–µ—Ç–∞–º–∏

**Workflow**: `.github/workflows/deploy.yml`  
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–µ–ø–ª–æ—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–±–æ—Ä–∫–∏ Docker –æ–±—Ä–∞–∑–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ hooks –¥–ª—è –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
git clone <repo>
cd aquastream
./infra/scripts/setup-git-hooks.sh

# –ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
git add .
git commit -m "Update infrastructure"
# üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è...
```

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **Docker** - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- **Docker Compose** - –≤–∞–ª–∏–¥–∞—Ü–∏—è compose —Ñ–∞–π–ª–æ–≤

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç—Å—è)

- **yq** - YAML –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **shellcheck** - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ shell —Å–∫—Ä–∏–ø—Ç–æ–≤
- **hadolint** - –ª–∏–Ω—Ç–µ—Ä –¥–ª—è Dockerfile —Ñ–∞–π–ª–æ–≤

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (Linux/macOS)
./infra/scripts/install-validation-tools.sh

# –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ - —Å–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
cat infra/docs/VALIDATION_TOOLS_SETUP.md
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ git hooks**:
   ```bash
   ./infra/scripts/setup-git-hooks.sh
   ```
3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)
4. **–†–∞–±–æ—Ç–∞–π—Ç–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –î–ª—è DevOps/SRE

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD workflows** (—É–∂–µ –≥–æ—Ç–æ–≤—ã)
2. **–î–æ–±–∞–≤—å—Ç–µ GitHub Secrets** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
   - `POSTGRES_PASSWORD`
   - `ELASTIC_PASSWORD`  
   - `KIBANA_PASSWORD`
   - `GRAFANA_ADMIN_PASSWORD`
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –æ—Ç—á–µ—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏** –≤ Actions

## –û–±—Ö–æ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (—ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É—á–∞–∏)

### –ü—Ä–æ–ø—É—Å–∫ pre-commit hook

```bash
# –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø! –¢–æ–ª—å–∫–æ –≤ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö
git commit --no-verify -m "Emergency fix"
```

### –ü—Ä–æ–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

–í –∫–æ–¥–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π:

```yaml
# docker-compose.yml
services:
  legacy-service:
    image: oldapp:latest  # TODO: pin version - legacy system
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### ‚ùå "Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –≤–∞–ª–∏–¥–Ω–∞"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
docker compose -f infra/docker/compose/docker-compose.yml config

# –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ YAML —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—Ç—É–ø—ã, –∫–∞–≤—ã—á–∫–∏, –¥–≤–æ–µ—Ç–æ—á–∏—è
```

### ‚ùå "–ù–∞–π–¥–µ–Ω—ã :latest —Ç–µ–≥–∏"

```bash  
# –ó–∞–º–µ–Ω–∏—Ç–µ :latest –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
# –ü–ª–æ—Ö–æ
image: nginx:latest

# –•–æ—Ä–æ—à–æ  
image: nginx:1.25-alpine
```

### ‚ùå "–°–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ .env —Ñ–∞–π–ª–µ"

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ (‚â•12 —Å–∏–º–≤–æ–ª–æ–≤)
# –ü–ª–æ—Ö–æ
POSTGRES_PASSWORD=123456

# –•–æ—Ä–æ—à–æ
POSTGRES_PASSWORD=MySecurePassword123!
```

### ‚ö†Ô∏è "Shell —Å–∫—Ä–∏–ø—Ç –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π"

```bash
# –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x path/to/script.sh
git add path/to/script.sh
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

- **–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** - —Å—Ç—Ä–µ–º–∏–º—Å—è –∫ >95%
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0 –≤ main –≤–µ—Ç–∫–µ
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –ø–æ–¥ <2 –º–∏–Ω—É—Ç—ã
- **Coverage –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤** - –≤—Å–µ —Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–∫—Ä—ã—Ç—ã

### Dashboard –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–±—É–¥—É—â–µ–µ)

–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grafana –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
- –¢—Ä–µ–Ω–¥—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –¢–æ–ø –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –æ—à–∏–±–æ–∫
- Performance –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

1. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ** `validate-infrastructure.sh`
2. **–î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏**:
   ```bash
   validate_my_configs() {
       log INFO "=== –í–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π ==="
       # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
       report_check "PASS" "–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞"
   }
   ```
3. **–í—ã–∑–æ–≤–∏—Ç–µ –≤ main()**:
   ```bash
   validate_my_configs
   ```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

- **Terraform** - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É .tf —Ñ–∞–π–ª–æ–≤
- **Kubernetes** - –≤–∞–ª–∏–¥–∞—Ü–∏—è YAML –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤  
- **Ansible** - –ø—Ä–æ–≤–µ—Ä–∫–∞ playbooks
- **Helm** - –≤–∞–ª–∏–¥–∞—Ü–∏—è charts

## Compliance –∏ –∞—É–¥–∏—Ç

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

- **CIS Docker Benchmark** - –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **OWASP** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **Infrastructure as Code** - –ø—Ä–∏–Ω—Ü–∏–ø—ã IaC
- **12-Factor App** - —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º

### –ê—É–¥–∏—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏

- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å timestamp
- –û—Ç—á–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ git
- –¢—Ä–µ–π—Å–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç –∫–æ–º–º–∏—Ç–∞ –¥–æ –¥–µ–ø–ª–æ—è

## –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å pre-push hooks
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- [ ] –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å IDE (VSCode extension)

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)  
- [ ] Dashboard –∫–∞—á–µ—Å—Ç–≤–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –æ—à–∏–±–æ–∫
- [ ] Policy as Code —Å OPA/Rego
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å security scanners

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6-12 –º–µ—Å—è—Ü–µ–≤)
- [ ] AI-powered –∞–Ω–∞–ª–∏–∑ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] –ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ–±–ª–∞—á–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- [ ] Compliance automation