# Архитектура Frontend-модуля AquaStream

## Обзор

Фронтенд-часть платформы AquaStream построена с использованием современных технологий и следует лучшим практикам организации кода. Архитектура основана на принципах Elegent Frontend Architecture (EFA), которая является адаптацией многослойной архитектуры для фронтенд-приложений.

## Слои архитектуры

Архитектура AquaStream Frontend состоит из следующих слоев:

### 1. UI Layer (UI слой)

UI слой содержит все многоразовые презентационные компоненты, которые не связаны с бизнес-логикой. 

```
src/components/ui/
```

Компоненты в этом слое должны быть:
- Независимыми от бизнес-логики
- Легко переиспользуемыми
- Не должны выполнять HTTP-запросы
- Не должны зависеть от контекста отображения

### 2. Domain Layer (Доменный слой)

Доменный слой содержит бизнес-логику приложения, организованную по функциональным модулям.

```
src/modules/
```

Каждый модуль представляет отдельный поддомен:

```
src/modules/auth/        # Модуль аутентификации
src/modules/events/      # Модуль управления мероприятиями
src/modules/profile/     # Модуль профиля пользователя
```

Структура каждого модуля:
- Контейнерные компоненты (экспортируются на верхнем уровне)
- API-клиенты (`api/`)
- Вспомогательные компоненты (`components/`)
- Хуки (`hooks/`)
- Типы (`types/`)

### 3. Application Layer (Слой приложения)

Слой приложения соединяет все компоненты вместе, создавая страницы и маршруты.

```
src/pages/        # Страницы приложения
src/routes/       # Настройка маршрутизации
src/layouts/      # Компоненты-обертки для страниц
```

### 4. Infrastructure Layer (Инфраструктурный слой)

Инфраструктурный слой предоставляет абстракции для взаимодействия с внешними API и сервисами.

```
src/services/     # Сервисы для работы с API
src/lib/          # Утилиты для работы с браузерными API
src/store/        # Глобальное хранилище состояния (Redux)
```

## Организация тестов

Все тесты хранятся в отдельной директории `test/`, структурированной по типам тестов:

```
test/
├── unit/          # Модульные тесты
├── integration/   # Интеграционные тесты
├── e2e/           # E2E тесты с Playwright
├── fixtures/      # Тестовые данные
├── utils/         # Утилиты для тестов
└── setup.ts       # Настройка тестового окружения
```

## Работа с Docker

Для контейнеризации приложения используется инфраструктурный модуль:

```
/infra/docker/images/Dockerfile.frontend
```

Docker-образ построен на основе multi-stage сборки:
1. Stage 1: Сборка фронтенда с использованием Node.js
2. Stage 2: Запуск приложения через Nginx с поддержкой Brotli-сжатия

## Стандарты кодирования

- **Именование компонентов**: PascalCase для компонентов, camelCase для функций
- **Типизация**: Все компоненты и функции должны быть типизированы с использованием TypeScript
- **Стилизация**: Использование Tailwind CSS для стилизации компонентов
- **Импорты**: Использование абсолютных импортов с алиасами (@components, @services и т.д.)
- **Переиспользование**: Вынесение общей логики в хуки, избегание дублирования кода
- **Тестирование**: Модульное тестирование компонентов и хуков, E2E-тестирование для интеграции

## Рекомендации по разработке

1. **Изолированные компоненты**: UI-компоненты должны быть изолированы от бизнес-логики
2. **Строгая типизация**: Всегда добавляйте типы для функций, компонентов и данных
3. **Избегайте глобального состояния**: Используйте локальное состояние, когда это возможно
4. **Оптимизация**: Используйте мемоизацию (React.memo, useMemo, useCallback)
5. **Тесты**: Пишите тесты для всех компонентов и хуков
6. **Документация**: Документируйте компоненты и сложную логику
7. **Консистентность**: Следуйте единому стилю кода во всем проекте 